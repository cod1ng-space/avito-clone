{"ast":null,"code":"var _jsxFileName = \"/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/components/forms/AdForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdForm = ({\n  categories,\n  onSubmit,\n  loading,\n  initialData\n}) => {\n  _s();\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [subcategoryId, setSubcategoryId] = useState('');\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (initialData) {\n      setTitle(initialData.title);\n      setDescription(initialData.description);\n      setSubcategoryId(initialData.subcategory_id);\n    }\n  }, [initialData]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!title || !description || !subcategoryId) {\n      return setError('Пожалуйста, заполните все обязательные поля');\n    }\n    if (title.length < 3) {\n      return setError('Название должно содержать минимум 3 символа');\n    }\n    if (description.length < 5) {\n      return setError('Описание должно содержать минимум 5 символов');\n    }\n    setError('');\n    onSubmit({\n      title,\n      description,\n      subcategory_id: parseInt(subcategoryId)\n    }, images);\n  };\n  const handleImageChange = e => {\n    const files = Array.from(e.target.files);\n    if (files.length > 7) {\n      setError('Можно загрузить максимум 7 изображений');\n      return;\n    }\n    setImages(files);\n    setError('');\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit,\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      controlId: \"title\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"text\",\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      controlId: \"description\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        as: \"textarea\",\n        rows: 5,\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      controlId: \"category\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n        value: subcategoryId,\n        onChange: e => setSubcategoryId(e.target.value),\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), categories.map(category => {\n          var _category$subcategori;\n          return /*#__PURE__*/_jsxDEV(\"optgroup\", {\n            label: category.name,\n            children: (_category$subcategori = category.subcategories) === null || _category$subcategori === void 0 ? void 0 : _category$subcategori.map(subcategory => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: subcategory.id,\n              children: subcategory.name\n            }, subcategory.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this))\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), !initialData && /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      controlId: \"images\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F (\\u0434\\u043E 7 \\u0448\\u0442\\u0443\\u043A)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*\",\n        onChange: handleImageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n        className: \"text-muted\",\n        children: \"\\u041C\\u043E\\u0436\\u043D\\u043E \\u0432\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u043D\\u0435\\u0441\\u043A\\u043E\\u043B\\u044C\\u043A\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0439 (\\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C 7)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      disabled: loading,\n      type: \"submit\",\n      children: initialData ? 'Обновить объявление' : 'Создать объявление'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(AdForm, \"GvCSMHf1YD+4ZCY660JHeKgQzPA=\");\n_c = AdForm;\nexport default AdForm;\nvar _c;\n$RefreshReg$(_c, \"AdForm\");","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Alert","jsxDEV","_jsxDEV","AdForm","categories","onSubmit","loading","initialData","_s","title","setTitle","description","setDescription","subcategoryId","setSubcategoryId","images","setImages","error","setError","subcategory_id","handleSubmit","e","preventDefault","length","parseInt","handleImageChange","files","Array","from","target","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","Group","className","controlId","Label","Control","type","value","onChange","required","as","rows","Select","map","category","_category$subcategori","label","name","subcategories","subcategory","id","multiple","accept","Text","disabled","_c","$RefreshReg$"],"sources":["/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/components/forms/AdForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Form, Button, Alert } from 'react-bootstrap';\n\nconst AdForm = ({ categories, onSubmit, loading, initialData }) => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [subcategoryId, setSubcategoryId] = useState('');\n  const [images, setImages] = useState([]);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (initialData) {\n      setTitle(initialData.title);\n      setDescription(initialData.description);\n      setSubcategoryId(initialData.subcategory_id);\n    }\n  }, [initialData]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (!title || !description || !subcategoryId) {\n      return setError('Пожалуйста, заполните все обязательные поля');\n    }\n\n    if (title.length < 3) {\n      return setError('Название должно содержать минимум 3 символа');\n    }\n\n    if (description.length < 5) {\n      return setError('Описание должно содержать минимум 5 символов');\n    }\n    \n    setError('');\n    \n    onSubmit({\n      title,\n      description,\n      subcategory_id: parseInt(subcategoryId)\n    }, images);\n  };\n\n  const handleImageChange = (e) => {\n    const files = Array.from(e.target.files);\n    \n    if (files.length > 7) {\n      setError('Можно загрузить максимум 7 изображений');\n      return;\n    }\n    \n    setImages(files);\n    setError('');\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      \n      <Form.Group className=\"mb-3\" controlId=\"title\">\n        <Form.Label>Название</Form.Label>\n        <Form.Control\n          type=\"text\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          required\n        />\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\" controlId=\"description\">\n        <Form.Label>Описание</Form.Label>\n        <Form.Control\n          as=\"textarea\"\n          rows={5}\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          required\n        />\n      </Form.Group>\n      \n      <Form.Group className=\"mb-3\" controlId=\"category\">\n        <Form.Label>Категория</Form.Label>\n        <Form.Select\n          value={subcategoryId}\n          onChange={(e) => setSubcategoryId(e.target.value)}\n          required\n        >\n          <option value=\"\">Выберите категорию</option>\n          {categories.map(category => (\n            <optgroup key={category.id} label={category.name}>\n              {category.subcategories?.map(subcategory => (\n                <option key={subcategory.id} value={subcategory.id}>\n                  {subcategory.name}\n                </option>\n              ))}\n            </optgroup>\n          ))}\n        </Form.Select>\n      </Form.Group>\n      \n      {!initialData && (\n        <Form.Group className=\"mb-3\" controlId=\"images\">\n          <Form.Label>Изображения (до 7 штук)</Form.Label>\n          <Form.Control\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleImageChange}\n          />\n          <Form.Text className=\"text-muted\">\n            Можно выбрать несколько изображений (максимум 7)\n          </Form.Text>\n        </Form.Group>\n      )}\n      \n      <Button disabled={loading} type=\"submit\">\n        {initialData ? 'Обновить объявление' : 'Создать объявление'}\n      </Button>\n    </Form>\n  );\n};\n\nexport default AdForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}