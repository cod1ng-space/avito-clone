{"ast":null,"code":"var _jsxFileName = \"/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/pages/EditAd.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Row, Col, Alert } from 'react-bootstrap';\nimport { adsService } from '../services/ads';\nimport { categoriesService } from '../services/categories';\nimport AdForm from '../components/forms/AdForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditAd = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [ad, setAd] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    loadAd();\n    loadCategories();\n  }, [id]);\n  const loadAd = async () => {\n    try {\n      const data = await adsService.getById(id);\n      setAd(data);\n    } catch (error) {\n      setError('Ошибка загрузки объявления');\n      console.error('Ошибка загрузки объявления:', error);\n    }\n  };\n  const loadCategories = async () => {\n    try {\n      const data = await categoriesService.getAll();\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to load categories:', error);\n    }\n  };\n  const handleSubmit = async adData => {\n    try {\n      setLoading(true);\n      setError('');\n      await adsService.update(id, adData);\n      navigate(`/ads/${id}`);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to update ad');\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!ad) return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"text-center\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 19\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"mb-4\",\n          children: \"Edit Ad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"danger\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AdForm, {\n          categories: categories,\n          onSubmit: handleSubmit,\n          loading: loading,\n          initialData: ad\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(EditAd, \"fxzOqJ9+ljMygHFqA7bY2N6fDSA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditAd;\nexport default EditAd;\nvar _c;\n$RefreshReg$(_c, \"EditAd\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Row","Col","Alert","adsService","categoriesService","AdForm","jsxDEV","_jsxDEV","EditAd","_s","id","navigate","ad","setAd","categories","setCategories","error","setError","loading","setLoading","loadAd","loadCategories","data","getById","console","getAll","handleSubmit","adData","update","_error$response","_error$response$data","response","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","md","variant","onSubmit","initialData","_c","$RefreshReg$"],"sources":["/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/pages/EditAd.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Row, Col, Alert } from 'react-bootstrap';\nimport { adsService } from '../services/ads';\nimport { categoriesService } from '../services/categories';\nimport AdForm from '../components/forms/AdForm';\n\nconst EditAd = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [ad, setAd] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadAd();\n    loadCategories();\n  }, [id]);\n\n  const loadAd = async () => {\n    try {\n      const data = await adsService.getById(id);\n      setAd(data);\n    } catch (error) {\n      setError('Ошибка загрузки объявления');\n      console.error('Ошибка загрузки объявления:', error);\n    }\n  };\n\n  const loadCategories = async () => {\n    try {\n      const data = await categoriesService.getAll();\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to load categories:', error);\n    }\n  };\n\n  const handleSubmit = async (adData) => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      await adsService.update(id, adData);\n      navigate(`/ads/${id}`);\n    } catch (error) {\n      setError(error.response?.data?.message || 'Failed to update ad');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!ad) return <Container className=\"text-center\">Loading...</Container>;\n\n  return (\n    <Container>\n      <Row className=\"justify-content-center\">\n        <Col md={8}>\n          <h1 className=\"mb-4\">Edit Ad</h1>\n          \n          {error && <Alert variant=\"danger\">{error}</Alert>}\n          \n          <AdForm\n            categories={categories}\n            onSubmit={handleSubmit}\n            loading={loading}\n            initialData={ad}\n          />\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default EditAd;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}