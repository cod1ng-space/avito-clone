{"ast":null,"code":"var _jsxFileName = \"/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/pages/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { adsService } from '../services/ads';\nimport { categoriesService } from '../services/categories';\nimport SearchBar from '../components/ui/SearchBar';\nimport CategorySelector from '../components/ui/CategorySelector';\nimport AdCard from '../components/ui/AdCard';\nimport Pagination from '../components/common/Pagination';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [ads, setAds] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  useEffect(() => {\n    loadCategories();\n    loadAds();\n  }, [currentPage, searchQuery, selectedCategory]);\n  const loadCategories = async () => {\n    try {\n      const data = await categoriesService.getAll();\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to load categories:', error);\n    }\n  };\n  const loadAds = async () => {\n    try {\n      setLoading(true);\n      const data = await adsService.search(searchQuery, selectedCategory, currentPage);\n      setAds(data.ads);\n      setTotalPages(Math.ceil(data.total / data.limit));\n    } catch (error) {\n      console.error('Ошибка загрузки объявлений:', error);\n      setAds([]);\n      setTotalPages(1);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSearch = query => {\n    setSearchQuery(query);\n    setCurrentPage(1);\n  };\n  const handleCategoryChange = categoryId => {\n    setSelectedCategory(categoryId);\n    setCurrentPage(1);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: /*#__PURE__*/_jsxDEV(SearchBar, {\n          onSearch: handleSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(CategorySelector, {\n          categories: categories,\n          selectedCategory: selectedCategory,\n          onCategoryChange: handleCategoryChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: ads.map(ad => /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          lg: 4,\n          className: \"mb-4\",\n          children: /*#__PURE__*/_jsxDEV(AdCard, {\n            ad: ad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)\n        }, ad.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), ads.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"No ads found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(Pagination, {\n        currentPage: currentPage,\n        totalPages: totalPages,\n        onPageChange: setCurrentPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"b+ra3Qj7yI6snNN5/laHBnCTLVc=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","adsService","categoriesService","SearchBar","CategorySelector","AdCard","Pagination","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","ads","setAds","categories","setCategories","loading","setLoading","currentPage","setCurrentPage","totalPages","setTotalPages","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","loadCategories","loadAds","data","getAll","error","console","search","Math","ceil","total","limit","handleSearch","query","handleCategoryChange","categoryId","children","className","md","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","onCategoryChange","map","ad","lg","id","length","onPageChange","_c","$RefreshReg$"],"sources":["/home/daniil/Documents/the_fifth_semester/TRPS/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { adsService } from '../services/ads';\nimport { categoriesService } from '../services/categories';\nimport SearchBar from '../components/ui/SearchBar';\nimport CategorySelector from '../components/ui/CategorySelector';\nimport AdCard from '../components/ui/AdCard';\nimport Pagination from '../components/common/Pagination';\n\nconst Home = () => {\n  const [ads, setAds] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n\n  useEffect(() => {\n    loadCategories();\n    loadAds();\n  }, [currentPage, searchQuery, selectedCategory]);\n\n  const loadCategories = async () => {\n    try {\n      const data = await categoriesService.getAll();\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to load categories:', error);\n    }\n  };\n\n  const loadAds = async () => {\n      try {\n          setLoading(true);\n          const data = await adsService.search(\n              searchQuery, \n              selectedCategory, \n              currentPage\n          );\n          \n          setAds(data.ads);\n          setTotalPages(Math.ceil(data.total / data.limit));\n      } catch (error) {\n          console.error('Ошибка загрузки объявлений:', error);\n          setAds([]);\n          setTotalPages(1);\n      } finally {\n          setLoading(false);\n      }\n  };\n\n  const handleSearch = (query) => {\n    setSearchQuery(query);\n    setCurrentPage(1);\n  };\n\n  const handleCategoryChange = (categoryId) => {\n    setSelectedCategory(categoryId);\n    setCurrentPage(1);\n  };\n\n  return (\n    <Container>\n      <Row className=\"mb-4\">\n        <Col md={8}>\n          <SearchBar onSearch={handleSearch} />\n        </Col>\n        <Col md={4}>\n          <CategorySelector \n            categories={categories}\n            selectedCategory={selectedCategory}\n            onCategoryChange={handleCategoryChange}\n          />\n        </Col>\n      </Row>\n\n      {loading ? (\n        <div className=\"text-center\">Загрузка...</div>\n      ) : (\n        <>\n          <Row>\n            {ads.map(ad => (\n              <Col key={ad.id} md={6} lg={4} className=\"mb-4\">\n                <AdCard ad={ad} />\n              </Col>\n            ))}\n          </Row>\n\n          {ads.length === 0 && (\n            <div className=\"text-center\">\n              <h4>No ads found</h4>\n            </div>\n          )}\n\n          {totalPages > 1 && (\n            <Pagination\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={setCurrentPage}\n            />\n          )}\n        </>\n      )}\n    </Container>\n  );\n};\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}